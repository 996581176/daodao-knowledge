<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python高阶技巧 | 刀刀的知识积累</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script>var _hmt = _hmt || [];
            (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6371333d39195dbe958ef14c0a722ac4";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
            })();</script>
    <link rel="icon" href="/daodao-knowledge/img/newlogo.ico">
    <meta name="description" content="立志不再懒懒散散的小前端的知识库">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/daodao-knowledge/assets/css/0.styles.4ed6a1f2.css" as="style"><link rel="preload" href="/daodao-knowledge/assets/js/app.f5ed6583.js" as="script"><link rel="preload" href="/daodao-knowledge/assets/js/8.65e0c7d8.js" as="script"><link rel="preload" href="/daodao-knowledge/assets/js/9.2d64f842.js" as="script"><link rel="preload" href="/daodao-knowledge/assets/js/76.1a60a183.js" as="script"><link rel="prefetch" href="/daodao-knowledge/assets/js/1.ec9e032c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/10.720ca8be.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/100.70819400.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/101.b75d5572.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/102.9aca055f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/103.83b7b56e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/104.7a7cc98f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/105.49aa9b94.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/106.23d81b78.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/107.c9c2c7f6.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/108.9454ebec.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/109.b38c98a0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/11.f6715383.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/110.9124e61b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/111.d14c0cc4.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/112.6764db6f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/113.32158181.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/114.eee97224.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/115.92506871.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/116.a70520dc.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/117.cc6a74c0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/118.49ee1e9e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/119.8ec79063.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/12.559a8934.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/120.01f4b32e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/121.a7bf02fd.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/122.d8384da6.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/123.d589aa55.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/124.6347993a.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/125.e60007b8.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/126.3c2f2496.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/127.d2e74aaf.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/128.630ac82c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/129.e88e4235.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/13.b5ffe300.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/130.8074cb37.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/131.651fb60d.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/132.6a81306b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/133.18194245.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/134.4a32b80e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/135.d831da00.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/136.f89103c0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/137.c216148a.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/138.f306ff64.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/139.0c804f39.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/14.fb66ad81.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/140.ac4036d7.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/141.65841381.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/142.f5392cb3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/143.d22c4e3f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/144.a0ba410a.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/145.6d085275.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/146.db87b628.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/147.6f01e81f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/148.db2ea310.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/149.eecce60c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/15.0b15a4d5.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/150.b45665b4.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/151.74872e28.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/152.35780d9b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/153.e3bc7ada.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/154.64ffbbe3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/155.8d399bd9.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/156.391cc0e9.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/157.68687c0f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/158.a8dd3fc3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/159.ed53e1f8.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/16.ad8b60c3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/160.f99a68ae.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/161.8962233f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/162.14da1e3d.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/163.28c767de.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/164.2a7494dc.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/165.6464c5dc.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/166.492eca31.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/167.edf45838.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/168.e2cb3bf8.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/169.676fbad0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/17.8fa02d1f.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/170.d7e67fe2.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/171.c609c882.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/172.e41f5c04.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/173.ccf77eb2.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/174.56f71155.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/175.f45d785e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/176.8d89d059.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/18.babb446b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/19.492f64aa.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/2.0df6c674.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/20.4d9f0971.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/21.d6998cd8.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/22.79b4e95c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/23.bf56fc59.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/24.05f7725b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/25.679e79b4.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/26.bdbda63c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/27.e177f8d5.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/28.9c656ef0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/29.dc0e6823.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/3.10597bdb.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/30.1772baff.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/31.2419595e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/32.5d921a82.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/33.23aa45e0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/34.69515070.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/35.dc21d06d.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/36.80b7a1e5.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/37.dae035cc.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/38.9780909a.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/39.7f22b327.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/4.8d4e1f1b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/40.cb9c6e4e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/41.c7afa2e8.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/42.ad32dc33.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/43.e4f37979.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/44.46923c01.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/45.4c8ff4df.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/46.6c648ccc.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/47.02968b8c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/48.50fb8cf2.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/49.de20685e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/5.2b70d0c7.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/50.d81f6a4c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/51.9b9764a0.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/52.756c48d3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/53.b3cfffe1.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/54.ca8096a3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/55.c2300bde.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/56.544a14a2.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/57.ab2a6cc4.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/58.e66a191d.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/59.c3b2330a.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/6.d57d4555.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/60.9a06f5d9.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/61.069fc274.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/62.cced5817.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/63.4a909e52.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/64.42057196.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/65.d105f840.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/66.62eb2d17.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/67.abb02440.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/68.5eee0026.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/69.76acf6b4.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/70.777642b8.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/71.506df5ec.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/72.03d63db6.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/73.369ae011.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/74.050229d1.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/75.3f2ed8e5.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/77.0290981c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/78.698d2cd6.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/79.19d354fc.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/80.689507a6.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/81.f715c724.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/82.aa5226c4.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/83.cef9779e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/84.ec61b86b.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/85.a33f8279.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/86.410654a9.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/87.9f3b93de.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/88.1acc10f3.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/89.3f936ffe.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/90.919e56fa.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/91.7816c6ac.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/92.f0e94e26.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/93.f1f46b34.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/94.5fe0e57a.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/95.ad99255c.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/96.43ec3e6e.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/97.85c85121.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/98.994c6c86.js"><link rel="prefetch" href="/daodao-knowledge/assets/js/99.e6f85e55.js">
    <link rel="stylesheet" href="/daodao-knowledge/assets/css/0.styles.4ed6a1f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/daodao-knowledge/" class="home-link router-link-active"><img src="/daodao-knowledge/img/home.jpg" alt="刀刀的知识积累" class="logo"> <span class="site-name can-hide">刀刀的知识积累</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/daodao-knowledge/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/600fd9/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/12e2d5/" class="nav-link">
  算法&amp;常用方法
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/450a09/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/ffc1d9/" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/a5dbfb/" class="nav-link">
  现代JavaScript库开发
</a></li></ul></li><li class="dropdown-item"><h4>
          框架学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/8ea889/" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/3ba846/" class="nav-link">
  vuePress
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/347ae3/" class="nav-link">
  qiankun微前端
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/f97ef5/" class="nav-link">
  vue3
</a></li></ul></li><li class="dropdown-item"><h4>
          webgl学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/7fb7ad/" class="nav-link">
  threejs
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/e77551/" class="nav-link">
  the book of shaders
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><span class="title">后端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端学习" class="mobile-dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daodao-knowledge/pages/437984/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><a href="/daodao-knowledge/pages/cd2a4f/" class="nav-link">
  零零碎碎
</a></div><div class="nav-item"><a href="/daodao-knowledge/pages/9d1205/" class="nav-link">
  随记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><span class="title">索引</span> <span class="arrow down"></span></button> <button type="button" aria-label="索引" class="mobile-dropdown-title"><span class="title">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daodao-knowledge/archives/" class="nav-link">
  归档
</a></li></ul></div></div><div class="nav-item"><a href="/daodao-knowledge/daodao/" class="nav-link">
  关于我
</a></div> <a href="https://github.com/Ostask/daodao-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/daodao-knowledge/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/600fd9/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/12e2d5/" class="nav-link">
  算法&amp;常用方法
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/450a09/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/ffc1d9/" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/a5dbfb/" class="nav-link">
  现代JavaScript库开发
</a></li></ul></li><li class="dropdown-item"><h4>
          框架学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/8ea889/" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/3ba846/" class="nav-link">
  vuePress
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/347ae3/" class="nav-link">
  qiankun微前端
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/f97ef5/" class="nav-link">
  vue3
</a></li></ul></li><li class="dropdown-item"><h4>
          webgl学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/7fb7ad/" class="nav-link">
  threejs
</a></li><li class="dropdown-subitem"><a href="/daodao-knowledge/pages/e77551/" class="nav-link">
  the book of shaders
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><span class="title">后端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端学习" class="mobile-dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daodao-knowledge/pages/437984/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><a href="/daodao-knowledge/pages/cd2a4f/" class="nav-link">
  零零碎碎
</a></div><div class="nav-item"><a href="/daodao-knowledge/pages/9d1205/" class="nav-link">
  随记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><span class="title">索引</span> <span class="arrow down"></span></button> <button type="button" aria-label="索引" class="mobile-dropdown-title"><span class="title">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daodao-knowledge/archives/" class="nav-link">
  归档
</a></li></ul></div></div><div class="nav-item"><a href="/daodao-knowledge/daodao/" class="nav-link">
  关于我
</a></div> <a href="https://github.com/Ostask/daodao-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>python基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daodao-knowledge/pages/8cd0c7/" class="sidebar-link">基础语法</a></li><li><a href="/daodao-knowledge/pages/437984/" class="sidebar-link">判断语句</a></li><li><a href="/daodao-knowledge/pages/f6b491/" class="sidebar-link">循环语句</a></li><li><a href="/daodao-knowledge/pages/c81e27/" class="sidebar-link">函数</a></li><li><a href="/daodao-knowledge/pages/42087e/" class="sidebar-link">数据容器</a></li><li><a href="/daodao-knowledge/pages/4edcaf/" class="sidebar-link">函数进阶</a></li><li><a href="/daodao-knowledge/pages/4c6894/" class="sidebar-link">文件操作</a></li><li><a href="/daodao-knowledge/pages/63f8e1/" class="sidebar-link">异常、模块与包</a></li><li><a href="/daodao-knowledge/pages/9f167b/" class="sidebar-link">面向对象</a></li><li><a href="/daodao-knowledge/pages/1f7757/" class="sidebar-link">SQL入门和实战</a></li><li><a href="/daodao-knowledge/pages/b20141/" class="sidebar-link">PySpark综合案例</a></li><li><a href="/daodao-knowledge/pages/44ca69/" aria-current="page" class="active sidebar-link">Python高阶技巧</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#闭包" class="sidebar-link">闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#简单闭包" class="sidebar-link">简单闭包</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#闭包注意事项" class="sidebar-link">闭包注意事项</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#装饰器" class="sidebar-link">装饰器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#装饰器的一般写法-闭包写法" class="sidebar-link">装饰器的一般写法（闭包写法）</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#装饰器的语法糖写法" class="sidebar-link">装饰器的语法糖写法</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#设计模式" class="sidebar-link">设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#工厂模式" class="sidebar-link">工厂模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#多线程并行执行概念" class="sidebar-link">多线程并行执行概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#进程、线程" class="sidebar-link">进程、线程</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#并行执行" class="sidebar-link">并行执行</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#多线程编程" class="sidebar-link">多线程编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#threading模块" class="sidebar-link">threading模块</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#网络编程" class="sidebar-link">网络编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#socket" class="sidebar-link">Socket</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#客户端和服务端" class="sidebar-link">客户端和服务端</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#socket服务端编程" class="sidebar-link">Socket服务端编程</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#socket客户端编程" class="sidebar-link">Socket客户端编程</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#正则表达式" class="sidebar-link">正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#正则的三个基础方法" class="sidebar-link">正则的三个基础方法</a></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#元字符匹配" class="sidebar-link">元字符匹配</a></li></ul></li><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#递归" class="sidebar-link">递归</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daodao-knowledge/pages/44ca69/#递归找文件" class="sidebar-link">递归找文件</a></li></ul></li></ul></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Python基础综合案例</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="page-content hasRightNav"><div class="right-nav" data-v-e3ddc674></div> <div class="article-title theme-default-content" data-v-fda27140><h1 data-v-fda27140><span class="circle" data-v-fda27140></span>Python高阶技巧</h1> <div class="lastUpdatedTime" data-v-fda27140><span class="text" data-v-fda27140>更新时间:</span> 2024-04-03 20:53:02</div></div> <div class="theme-default-content content__default"><h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p>在函数嵌套的前提下，内部函数使用了外部函数的变量，并且外部函数返回了内部函数，我们把这个使用外部函数变量的内部函数称为闭包</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">account_create</span><span class="token punctuation">(</span>initial_amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">atm</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> deposit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">nonlocal</span> initial_amount
        <span class="token keyword">if</span> deposit<span class="token punctuation">:</span>
            initial_amount <span class="token operator">+=</span> num
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            initial_amount <span class="token operator">-=</span> num
    <span class="token keyword">return</span> atm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="简单闭包"><a href="#简单闭包" class="header-anchor">#</a> 简单闭包</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;&lt;</span><span class="token interpolation"><span class="token punctuation">{</span>logo<span class="token punctuation">}</span></span><span class="token string">&gt;</span><span class="token interpolation"><span class="token punctuation">{</span>msg<span class="token punctuation">}</span></span><span class="token string">&lt;</span><span class="token interpolation"><span class="token punctuation">{</span>logo<span class="token punctuation">}</span></span><span class="token string">&gt;&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> inner

fn1 <span class="token operator">=</span> outer<span class="token punctuation">(</span><span class="token string">&quot;黑马程序员&quot;</span><span class="token punctuation">)</span>
fn1<span class="token punctuation">(</span><span class="token string">&quot;大家好呀&quot;</span><span class="token punctuation">)</span> <span class="token comment"># &lt;黑马程序员&gt;大家好呀&lt;黑马程序员&gt;</span>
fn1<span class="token punctuation">(</span><span class="token string">&quot;学Python就来&quot;</span><span class="token punctuation">)</span> <span class="token comment"># &lt;黑马程序员&gt;学Python就来&lt;黑马程序员&gt;</span>

fn2 <span class="token operator">=</span> outer<span class="token punctuation">(</span><span class="token string">&quot;传智教育&quot;</span><span class="token punctuation">)</span>
fn2<span class="token punctuation">(</span><span class="token string">&quot;IT职业教育培训&quot;</span><span class="token punctuation">)</span> <span class="token comment"># &lt;传智教育&gt;IT职业教育培训&lt;传智教育&gt;</span>
fn2<span class="token punctuation">(</span><span class="token string">&quot;学Python就来&quot;</span><span class="token punctuation">)</span> <span class="token comment"># &lt;传智教育&gt;学Python就来&lt;传智教育&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>需要使用nonlocal关键字修饰外部函数的变量，才可在内部函数中修改它</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">nonlocal</span> num1
        num1 <span class="token operator">+=</span> num2
        <span class="token keyword">print</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>
    <span class="token keyword">return</span> inner

fn <span class="token operator">=</span> outer<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
fn<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># 20</span>
fn<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment"># 40</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <h3 id="闭包注意事项"><a href="#闭包注意事项" class="header-anchor">#</a> 闭包注意事项</h3> <p>优点，使用闭包可以让我们得到：</p> <ul><li>无需定义全局变量即可实现通过函数，持续的访问、修改某个值</li> <li>闭包使用的变量的作用域在函数内，难以被错误的调用修改</li></ul> <p>缺点：</p> <ul><li>由于内部函数持续引用外部函数的值，所以会导致这一部分内存空间不被释放，一直占用内存。</li></ul> <h2 id="装饰器"><a href="#装饰器" class="header-anchor">#</a> 装饰器</h2> <p>装饰器其实也是一种闭包，其功能就是在不破坏目标函数原因的代码和功能的前提下，为目标函数增加新功能。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> random
    <span class="token keyword">import</span> time
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;睡眠中......&quot;</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>希望给sleep函数，增加一个功能：</p> <ul><li>在调用sleep前输出：我要睡觉了</li> <li>在调用sleep后输出：我起床了</li></ul> <h3 id="装饰器的一般写法-闭包写法"><a href="#装饰器的一般写法-闭包写法" class="header-anchor">#</a> 装饰器的一般写法（闭包写法）</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># 定义一个闭包函数，在闭包函数内部：</span>
<span class="token comment">#   执行目标函数</span>
<span class="token comment">#   并完成功能的添加</span>
<span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;我要睡觉了&quot;</span><span class="token punctuation">)</span>
        func<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;我起床了&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> inner

<span class="token keyword">def</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> random
    <span class="token keyword">import</span> time
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;睡眠中......&quot;</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fn <span class="token operator">=</span> outer<span class="token punctuation">(</span>sleep<span class="token punctuation">)</span>
fn<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="装饰器的语法糖写法"><a href="#装饰器的语法糖写法" class="header-anchor">#</a> 装饰器的语法糖写法</h3> <p>使用@outer定义在目标函数sleep之上</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;我要睡觉了&quot;</span><span class="token punctuation">)</span>
        func<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;我起床了&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> inner

<span class="token decorator annotation punctuation">@outer</span>
<span class="token keyword">def</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> random
    <span class="token keyword">import</span> time
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;睡眠中......&quot;</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

sleep<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="设计模式"><a href="#设计模式" class="header-anchor">#</a> 设计模式</h2> <p>设计模式是一种编程套路，可以极大的方便程序的开发。最经典最常见、最经典的设计模式，就是我们所学习的面向对象了。</p> <p>除了面向对象歪，在编程中也有很多既定的套路可以方便开发，我们称之为设计模式：</p> <ul><li>单例、工厂模式</li> <li>建造者、责任链、状态、备忘录、解释器、访问者、观察者、中介、模板、代理模式</li></ul> <h3 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Tool</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

t1 <span class="token operator">=</span> Tool<span class="token punctuation">(</span><span class="token punctuation">)</span>
t2 <span class="token operator">=</span> Tool<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>创建类的实例后，就可以得到一个完整的、独立的对象。<br>
通过print语句可以看出，它们的内存地址是不相同的，即t1和t2是完全独立的两个对象。</p> <p>某些常见下，我们需要一个类无论多少次类对象，都仅仅提供一个具体的实例，用以节省创建类对象的开销和内存开销</p> <p>比如某些工具类，仅需要1个实例，即可在各处使用</p> <p>这就是单例模式所要实现的效果。</p> <p>单例的实现模式：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># 在一个文件中定义如上代码</span>
<span class="token keyword">class</span> <span class="token class-name">StrTools</span>
    <span class="token keyword">pass</span>

str_tool <span class="token operator">=</span> StrTools<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># 在另一个文件中导入对象</span>
<span class="token keyword">from</span> test <span class="token keyword">import</span> str_tool

s1 <span class="token operator">=</span> str_tool
s2 <span class="token operator">=</span> str_tool

<span class="token comment"># s1和s2是同一个对象</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h3> <p>当需要大量创建一个类的实例的时候，可以使用工厂模式<br>
即，从原生的使用类的构造去创建对象的形式<br>
迁移到，基于工厂提供的方法去创建对象的形式</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># worder = Worker()</span>
<span class="token comment"># stu = Student()</span>
<span class="token comment"># teacher = Teacher()</span>

<span class="token keyword">class</span> <span class="token class-name">Factory</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get_person</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> p_type <span class="token operator">==</span> <span class="token string">'w'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Worker<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> p_type <span class="token operator">==</span> <span class="token string">'s'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Teacher<span class="token punctuation">(</span><span class="token punctuation">)</span>

factory <span class="token operator">=</span> Factory<span class="token punctuation">(</span><span class="token punctuation">)</span>
worker <span class="token operator">=</span> factory<span class="token punctuation">.</span>get_person<span class="token punctuation">(</span><span class="token string">'w'</span><span class="token punctuation">)</span>
stu <span class="token operator">=</span> factory<span class="token punctuation">.</span>get_person<span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span>
teacher <span class="token operator">=</span> factory<span class="token punctuation">.</span>get_person<span class="token punctuation">(</span><span class="token string">'t'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">使用工厂类的get_person()方法去创建具体的类对象优点：</p> <ul><li>大批量创建对象的时候有统一的入口，易于代码维护</li> <li>当发生修改，仅修改工厂类的创建方法即可</li> <li>符合现实世界的模式，即由工厂来制作产品(对象)</li></ul></div> <h2 id="多线程并行执行概念"><a href="#多线程并行执行概念" class="header-anchor">#</a> 多线程并行执行概念</h2> <h3 id="进程、线程"><a href="#进程、线程" class="header-anchor">#</a> 进程、线程</h3> <p>现代操作系统比如Mac OS X,UNIX,Linux,Windows等，都是支持“多任务”的操作系统。<br>
进程： 就是一个程序，运行在系统之上，那么便称之为这个程序为一个运行进程，并分配进程ID方便系统管理。<br>
现成： 线程是归属于进程的，一个进程可以开启多个线程，执行不同的工作，是进程的实际工作最小单位。</p> <p>进程就好比一家公司，是操作系统对程序进行运行管理的单位<br>
现成就好比公司的员工，进程可以有多个线程，是进程实际的工作者</p> <p>操作系统中可以运行多个进程，即多任务运行<br>
一个进程内可以运行多个线程，即多线程运行</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>进程之间是内存隔离的，即不同的进程拥有各自的内存空间，这就类似于不同的公司拥有不同的办公场所。</p> <p>线程之间是内存共享的，线程是属于进程的，一个进程内的多个线程之间是共享这个进程所拥有的内存空间的，这就好比，公司员工之间是共享公司的办公场所。</p></div> <h3 id="并行执行"><a href="#并行执行" class="header-anchor">#</a> 并行执行</h3> <p>并行执行的意思指的是同一时间做不同的工作。<br>
进程之间就是并行执行的，操作系统可以同时运行好多程序，这些程序都是在并行执行。</p> <p>除了进程外，线程其实也是可以并行执行的。一个程序在同一时间做两件乃至多件不同的事情，我们就称之为：多线程并行执行。</p> <h2 id="多线程编程"><a href="#多线程编程" class="header-anchor">#</a> 多线程编程</h2> <h3 id="threading模块"><a href="#threading模块" class="header-anchor">#</a> threading模块</h3> <p>绝大多数编程语言，都允许多线程编程，Python也不例外。<br>
Python的多线程可以通过threading模块来实现。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> threading

thread_obj <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span><span class="token punctuation">[</span>group <span class="token punctuation">[</span><span class="token punctuation">,</span> target <span class="token punctuation">[</span><span class="token punctuation">,</span> name <span class="token punctuation">[</span><span class="token punctuation">,</span> args <span class="token punctuation">[</span><span class="token punctuation">,</span> kwargs<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># group: 暂时无用，未来功能的预留参数</span>
<span class="token comment"># target：执行的目标任务名</span>
<span class="token comment"># args: 以元组的方式给执行任务传参</span>
<span class="token comment"># kwargs: 以字典方式给执行任务传参</span>
<span class="token comment"># name: 线程名，一般不用设置</span>

<span class="token comment"># 启动线程，让线程开始工作</span>
thread_obj<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>示例：通过下面代码，即可实现多线程编程，让一个Python程序实现启动两个线程，每个线程各执行一个函数。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> time
<span class="token keyword">import</span> threading

<span class="token keyword">def</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;我在唱歌，啦啦啦...&quot;</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">dance</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;我在跳舞，哗哗哗...&quot;</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个唱歌的线程</span>
sing_thread <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>sing<span class="token punctuation">)</span>

<span class="token comment"># 创建一个跳舞的线程</span>
dance_thread <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>dance<span class="token punctuation">)</span>

<span class="token comment"># 让线程去干活吧</span>
sing_thread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
dance_thread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>需要传参的话可以通过：</p> <ul><li>args参数通过元组（按参数顺序）的方式传参</li> <li>或使用kwargs参数用字典的形式传参</li></ul> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> time
<span class="token keyword">import</span> threading

<span class="token keyword">def</span> <span class="token function">sing</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;我在唱歌，</span><span class="token interpolation"><span class="token punctuation">{</span>msg<span class="token punctuation">}</span></span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">dance</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;我在跳舞，</span><span class="token interpolation"><span class="token punctuation">{</span>msg<span class="token punctuation">}</span></span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个唱歌的线程</span>
sing_thread <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>sing<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;哈哈哈&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个跳舞的线程</span>
dance_thread <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>dance<span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;啦啦啦&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 让线程去干活吧</span>
sing_thread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
dance_thread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="网络编程"><a href="#网络编程" class="header-anchor">#</a> 网络编程</h2> <h3 id="socket"><a href="#socket" class="header-anchor">#</a> Socket</h3> <p>socket是进程之间通信的工具，好比显示生活中的插座，所有的家用电器要想工作都是基于插座进行，进程之间想要进行网络通信需要socket。<br>
Socket负责进程之间的网络数据传输，好比数据的搬运工。</p> <h3 id="客户端和服务端"><a href="#客户端和服务端" class="header-anchor">#</a> 客户端和服务端</h3> <p>2个进程之间通过Socket进行相互通讯，就必须有服务端和客户端</p> <p>Socket服务端：等待其它进程的连接，可接受发来的消息，可以回复消息<br>
Socket客户端：主动连接服务端，可以发送消息，可以接收回复
<img src="https://daodaoblogpicgo.oss-cn-shanghai.aliyuncs.com/img/202404080945722.png" alt=""></p> <h3 id="socket服务端编程"><a href="#socket服务端编程" class="header-anchor">#</a> Socket服务端编程</h3> <p>主要分为如下几个步骤：</p> <ol><li>创建socket对象</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> socket
socket_server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>绑定socket_server到指定IP和地址</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code>socket_server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>服务端开始监听端口</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code>socker_server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span>backlog<span class="token punctuation">)</span>
<span class="token comment"># backlog为int整数，表示允许的连接数量，超出的会等待，可以不填，不填会自动设置一个合理值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>收客户端连接，获得连接对象</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code>conn<span class="token punctuation">,</span> address <span class="token operator">=</span> socket_server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;接收到客户端连接，连接来自：</span><span class="token interpolation"><span class="token punctuation">{</span>address<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token comment"># accept方法是阻塞方法，如果没有连接，会卡再当前这一行不乡下执行代码</span>
<span class="token comment"># accept返回的事一个二元元组，可以使用上述形式，用两个变量接收二元元组的2个元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li>客户端连接后，通过recv方法，接收客户端发送的消息</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span>
    <span class="token comment"># recv方法返回值是字节数组（Bytes),可以通过decode使用UTF-8解码为字符串</span>
    <span class="token comment"># recv方法的传参是buffsize,缓冲区大小，一般设置为1024即可</span>
    <span class="token keyword">if</span> data <span class="token operator">==</span> <span class="token string">'exit'</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;接收到发送来的数据：&quot;</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span>
<span class="token comment"># 可以通过while True 无限循环来持续和客户端进行数据交互</span>
<span class="token comment"># 可以通过判定客户端发来的特殊标记，如exit，来退出无限循环</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="6"><li>通过conn(客户端当次连接对象)，调用send方法可以回复消息</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> data <span class="token operator">==</span> <span class="token string">'exit'</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;接收到发送来的数据：&quot;</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span>

    conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">&quot;你好呀哈哈哈哈&quot;</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="7"><li>conn(客户端当次连接对象)和socket_server对象调用close方法，关闭连接</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
演示Socket服务器开发
&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
演示Socket服务器开发
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> socket
<span class="token comment"># 构建Socket对象</span>
socket_server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 绑定ip地址和端口</span>
socket_server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 监听端口</span>
socket_server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># 接受客户端信息</span>
conn<span class="token punctuation">,</span> address <span class="token operator">=</span> socket_server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;接收到了客户端的链接，客户端的信息是：</span><span class="token interpolation"><span class="token punctuation">{</span>address<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    data<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span>
    <span class="token comment"># 发送回复消息</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;客户发来的消息：</span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入你要和客户回复的消息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> msg <span class="token operator">==</span> <span class="token string">'exit'</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>

<span class="token comment"># 关闭</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
socket_server<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="socket客户端编程"><a href="#socket客户端编程" class="header-anchor">#</a> Socket客户端编程</h3> <p>主要分为如下几个步骤：</p> <ol><li>创建socket对象</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> socket
socket_client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>连接到服务端</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code>socket_client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>发送消息</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span> <span class="token comment"># 可以通过无限循环来确保持续的发送消息给服务端</span>
    send_msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入要发送的消息&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> send_msg <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'exit'</span><span class="token punctuation">:</span>
        <span class="token comment"># 通过特殊标记来确保可以退出无限循环</span>
        <span class="token keyword">break</span>
    socket_client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>send_msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 消息需要编码为字节数组（UTF-8编码)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="4"><li>接收返回消息</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span> <span class="token comment"># 可以通过无限循环来确保持续的发送消息给服务端</span>
    send_msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入要发送的消息&quot;</span><span class="token punctuation">)</span>
    socket_client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>send_msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    recv_data <span class="token operator">=</span> socket_client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment"># 1024是缓冲区大小，一般1024即可</span>
    <span class="token comment"># recv方法是阻塞式的，即不接收到返回，就卡在这里等待</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;服务端回复消息为：&quot;</span><span class="token punctuation">,</span>recv_data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="5"><li>关闭链接</li></ol> <div class="language-py line-numbers-mode"><pre class="language-py"><code>socket_client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
演示Socket客户端开发
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> socket
<span class="token comment"># 创建socket对象</span>
socket_client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 链接到服务器</span>
socket_client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 发送消息</span>
    msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入要给服务器发送的消息：&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> msg <span class="token operator">==</span> <span class="token string">'exit'</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    socket_client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 接收返回信息</span>
    recv_data <span class="token operator">=</span> socket_client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;服务器回复的消息是：</span><span class="token interpolation"><span class="token punctuation">{</span>recv_data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 关闭链接</span>
socket_client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <h3 id="正则的三个基础方法"><a href="#正则的三个基础方法" class="header-anchor">#</a> 正则的三个基础方法</h3> <p>Python正则表达式，使用re模块，并基于re模块中三个基础方法来做正则匹配。<br>
分别是： match、search、findall三个基础方法</p> <h4 id="re-match-匹配规则-被匹配字符串"><a href="#re-match-匹配规则-被匹配字符串" class="header-anchor">#</a> re.match(匹配规则，被匹配字符串)</h4> <p>从被匹配字符串开头进行匹配，匹配成功返回匹配对象（包含匹配的信息），匹配不成功返回空。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>s <span class="token operator">=</span> <span class="token string">'python itheima python itheima python itheima'</span>

result <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">'python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment"># &lt;re.Match object; span=(0,6), match='python'&gt;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># (0, 6)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># python</span>

s <span class="token operator">=</span> <span class="token string">'1python itheima python itheima python itheima'</span>
result <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">'python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment"># None 从开头开始匹配的，如果开头都没有，后面的就不关心拉</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="search-匹配规则-被匹配字符串"><a href="#search-匹配规则-被匹配字符串" class="header-anchor">#</a> search(匹配规则，被匹配字符串)</h4> <p>搜索整个字符串，找出匹配的。从前向后，找到第一个后，就停止，不会继续向后</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>s <span class="token operator">=</span> <span class="token string">'1python666itheima666python666'</span>

result <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment"># &lt;re.Match object; span=(1,7), match='python'&gt;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># (1,7)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># python</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>整个字符串都找不到，返回None</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>s <span class="token operator">=</span> <span class="token string">'itheima666'</span>

result <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment"># None</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="findall-匹配规则-被匹配字符串"><a href="#findall-匹配规则-被匹配字符串" class="header-anchor">#</a> findall(匹配规则，被匹配字符串)</h4> <p>匹配整个字符串，找出全部匹配项</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>s <span class="token operator">=</span> <span class="token string">'1python666itheima666python666'</span>

result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment"># ['python', 'python']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>找不到返回空 list:[]</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>s <span class="token operator">=</span> <span class="token string">'1python666itheima666python666'</span>

result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'itcast'</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment"># None</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="元字符匹配"><a href="#元字符匹配" class="header-anchor">#</a> 元字符匹配</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code>s <span class="token operator">=</span> <span class="token string">&quot;itheima1 @@python2 !!666 ##itcast3&quot;</span>

<span class="token comment"># 找出全部数字</span>
re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'\d'</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span> <span class="token comment"># ['1', '2', '6', '6', '6', '3']</span>
<span class="token comment"># 字符串的r标记，表示当前字符串是原始字符串，即内部的转义字符无效而是普通字符</span>
<span class="token comment"># 找出特殊字符</span>
re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'\W'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token comment"># [' ', '@', '@', ' ', '!', '!', ' ', '#', '#']</span>
<span class="token comment"># 找出全部英文字母</span>
re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z]'</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span>
<span class="token comment"># ['i', 't', 'h', 'e', 'i', 'm', 'a', 'p', 'y', 't', 'h', 'o', 'n', 'i', 't', 'c', 'a', 's', 't']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="递归"><a href="#递归" class="header-anchor">#</a> 递归</h2> <p>递归在编程中是一种非常重要的算法<br>
递归：即方法(函数)自己调用自己的一种特殊编程写法</p> <h3 id="递归找文件"><a href="#递归找文件" class="header-anchor">#</a> 递归找文件</h3> <p>最典型的递归场景为找出一个文件夹中全部的文件</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> os

<span class="token keyword">def</span> <span class="token function">get_files_recursion_from_dir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>

    file_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> f <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            new_path <span class="token operator">=</span> path <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> f
            <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>new_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
                file_list <span class="token operator">+=</span> get_files_recursion_from_dir<span class="token punctuation">(</span>new_path<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                file_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_path<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;路径不存在&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">return</span> file_list

<span class="token keyword">print</span><span class="token punctuation">(</span>get_files_recursion_from_dir<span class="token punctuation">(</span><span class="token string">&quot;D:/尚学堂-视频课&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Ostask/daodao-knowledge/edit/master/docs/python/01.python基础/12.Python高阶技巧.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/daodao-knowledge/pages/b20141/" class="prev">
        PySpark综合案例
      </a></span> <span class="next"><a href="/daodao-knowledge/pages/10422b/">
        数据可视化-折线图可视化
      </a>
      →
    </span></p></div>  <div class="footer">
    MIT Licensed | Copyright © 2021-present 刀刀
  </div></main></div><div class="global-ui"></div></div>
    <script src="/daodao-knowledge/assets/js/app.f5ed6583.js" defer></script><script src="/daodao-knowledge/assets/js/8.65e0c7d8.js" defer></script><script src="/daodao-knowledge/assets/js/9.2d64f842.js" defer></script><script src="/daodao-knowledge/assets/js/76.1a60a183.js" defer></script>
  </body>
</html>
