---
title: width和height作用的具体细节
date: 2024-03-08 08:14:56
permalink: /pages/6d662e/
categories:
  - css
  - css世界
  - 流、元素与基本尺寸
tags:
    -
---
## 外部尺寸与流体特性
### 正常流宽度
在页面中随便扔一个`<div>`元素，其尺寸表现就会和这水流一样铺满容器。这就是block容器的流特性。这种特性在所有浏览器的表现都是一致的。

所谓流特性，并不是看上去的宽度100%那么简单，而是一种margin/border/padding和content内容区域自动分配水平空间的机制。

因此，想让一个div自动铺满是不需要写“width:100%”的，多此一举而。

### 格式化宽度
格式化宽度仅出现在“绝对定位模型”中，也就是出现在`position`属性为`absolute`或`fixed`的元素中。

在默认情况下，绝对定位元素的宽度表现是“包裹性”，宽度由内部尺寸决定。

但是对于非替换元素，当`left/right`或`top/bottom`对立方位的属性同时存在时，元素的宽度表现为“格式化宽度”，其宽度大小相对于最近的具有定位特性（position属性不是static）的祖先元素计算。

“格式化宽度”具有完全的流体性，也就是margin、border、padding和content内容区域同样会自动分配水平（和垂直）空间。

## 内部尺寸与流体特性
所谓“内部尺寸”，简单来讲就是元素的尺寸由内部的元素决定，而非由外部的容器决定。
::: tip Q:如何快速判断一个元素使用的是否为“内部尺寸”
假如这个元素里面没有内容，宽度就是0，那就是应用的“内部尺寸”。
:::

内部尺寸的三种表现形式：
### 包裹性
包裹的意思就是“shrink-to-fit”,即收缩到合适，除了“包裹性”，还有“自适应性”。

所谓“自适应性”，指的是元素尺寸由内部元素决定，但永远小于“包含块”容器的尺寸（除非容器尺寸小于元素的“首选最小宽度”）。

因此如果一个元素的`display`属性值是`inline-block`,那么即使其里面内容再多，只要是正常文本，宽度也不会超过父容器。

::: tip “按钮”元素是 inline-block 元素
按钮文字越多宽度越宽（内部尺寸特性），但如果文字足够多，则会在容器的宽度处自动换行（自适应特性）。（button标签按钮才会自动换行，input标签按钮默认 white-space:pre,需要将pre值重置为默认的normal）
:::

::: tip “包裹性”对实际开发有什么作用呢？
请看这个需求： 页面某个模块的文字内容是动态的，可能是几个字，也能是一句话。然后希望文字少的时候居中显示，文字超过一行就居左显示。该如何实现呢？

核心css代码如下：
```css
.box {
    text-align: center;
}
.content {
    display: inline-block;
    text-align: left;
}
```
这样，box的center控制的是 content元素居中，而content元素在文字少的时候没有那么长，因此整体文字看起来就是居中的，一旦超过一行，content元素的宽度占满box，box的center看起来就不起作用了（实际上还是起作用的，只不过是content太宽了，此时content上设置的text-align:left就显现出来了。）
<div class="box">
    <p class="content" id="conMore">文字内容</p>
</div>
<p><button id="btnMore">更多文字</button></p>
:::

除了`inline-block`元素，浮动元素以及绝对定位元素都具有包裹性，均有类似的只能宽度行为。

<script>
    export default {
        mounted() {
            var btn = document.getElementById('btnMore'), 
            content = document.getElementById('conMore');

            if (btn && content) {
                console.log(btn, content)
            btn.onclick = function() {
                content.innerHTML += '-新增文字';
            };
            }
        }
    }
</script>

<style scoped>
.box {
    padding: 10px;
    background-color: #cd0000;
    text-align: center;
    width: 200px;
    color: #fff;
}
.content {
    display: inline-block;
    text-align:left;
}
</style>