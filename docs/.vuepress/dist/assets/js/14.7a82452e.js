(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{356:function(t,s,n){},399:function(t,s,n){"use strict";n(356)},418:function(t,s,n){"use strict";n.r(s);var a=n(310),e=n(315),r=n(316),p={data:function(){return{gui:null}},mounted:function(){this.init()},beforeDestroy:function(){this.gui&&this.gui.destroy()},methods:{init:function(){var t=document.getElementById("three1"),s=Object(r.f)(0,t),n=Object(r.e)(t),p=Object(r.c)(t),o=new a.M,c=Object(r.g)(p,n),v=new a.f;Object(r.d)(o),Object(r.b)(o).position.y=0;var i=new a.c(4,4,4),_=new a.z({color:16711680}),u=new a.v(i,_);u.castShadow=!0,u.position.x=-10,u.position.y=4,u.position.z=0,o.add(u);var l=new a.O(4,20,20),k=new a.z({color:7829503}),d=new a.v(l,k);d.position.x=20,d.position.y=0,d.position.z=2,d.castShadow=!0,o.add(d);var b=new a.h(2,2,20),m=new a.z({color:7864183}),h=new a.v(b,m);h.castShadow=!0,h.position.set(0,0,1),o.add(h),p.position.x=-30,p.position.y=40,p.position.z=30,p.lookAt(o.position);var C=new a.b(3487029);o.add(C);var g=0,f=new function(){this.rotationSpeed=.02,this.bouncingSpeed=.03,this.scalingSpeed=.03},w=new e.a({},t);w.add(f,"rotationSpeed",0,.5),w.add(f,"bouncingSpeed",0,.5),w.add(f,"scalingSpeed",0,.5),this.gui=w,function t(){s.update(),c.update(v.getDelta()),u.rotation.x+=f.rotationSpeed,u.rotation.y+=f.rotationSpeed,u.rotation.z+=f.rotationSpeed,g+=f.bouncingSpeed,d.position.x=20+10*Math.cos(g),d.position.y=2+10*Math.abs(Math.sin(g)),S+=f.scalingSpeed;var a=Math.abs(Math.sin(S/4)),e=Math.abs(Math.cos(S/5)),r=Math.abs(Math.sin(S/7));h.scale.set(a,e,r),requestAnimationFrame(t),n.render(o,p)}();g=0;var S=0}}},o=(n(399),n(42)),c=Object(o.a)(p,(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("ul",[n("li",[n("strong",[t._v("基础动画")]),t._v("：\n"),n("code",[t._v("Threejs")]),t._v("里所有动画的基础，修改对象的三个属性：位置、旋转和缩放。")]),t._v(" "),n("li",[n("strong",[t._v("移动相机")]),t._v("：\n动画中一个很重要的部分是在场景中移动相机的能力。")]),t._v(" "),n("li",[n("strong",[t._v("变形和蒙皮")]),t._v("：\n制作复杂模型的动画主要有两种方式。使用变形技术，定义几何体之间的过渡；以及使用骨骼和蒙皮技术处理这种过渡。")]),t._v(" "),n("li",[n("strong",[t._v("加载外部动画")])])]),t._v(" "),n("h2",{attrs:{id:"基础动画"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础动画"}},[t._v("#")]),t._v(" 基础动画")]),t._v(" "),n("p",[t._v("在看例子之前，我们先快速回顾一下"),n("code",[t._v("render")]),t._v("（渲染）循环。为了支持动画，我们需要告诉"),n("code",[t._v("Three.js")]),t._v("多久渲染一次场景。为此，我们要使用由"),n("code",[t._v("HTML5")]),t._v("提供的标准的"),n("code",[t._v("requestAnimationFrame")]),t._v("函数：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//render the scene")]),t._v("\n  render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//schedule the next rendering using requestAnimationFrame")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[t._v("这段代码里，我们只需要在初始化场景时调用一次"),n("code",[t._v("render()")]),t._v("函数。在"),n("code",[t._v("render()")]),t._v("函数中，我们用"),n("code",[t._v("requestAnimationFrame")]),t._v("来安排下一次渲染。这样，浏览器就可以保证以正确的时间间隔（通常是60次每秒）调用"),n("code",[t._v("render()")]),t._v("函数。通过"),n("code",[t._v("requestAnimationFrame")]),t._v("，我们不必告诉浏览器什么时候需要刷新屏幕，而是请求浏览器在最适合的时候执行我们提供的函数。通常情况下其结果是60fps（帧频）。使用"),n("code",[t._v("requestAnimationFrame")]),t._v("会让你的动画运行得更加平缓，而且对CPU和GPU更加友好，你再也不必再担心渲染时机的问题。")]),t._v(" "),n("h3",{attrs:{id:"简单动画"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简单动画"}},[t._v("#")]),t._v(" 简单动画")]),t._v(" "),n("p",[t._v("我们通过改变对象的旋转、缩放、位置、材质、顶点、面，以及其他你想得到的东西，可以很容易地制作出动画。在下一次的"),n("code",[t._v("render")]),t._v("循环中，Threejs就可以渲染这些修改后的属性。")]),t._v(" "),[n("div",{attrs:{id:"three1"}})],t._v(" "),n("p",[t._v("该示例的"),n("code",[t._v("render")]),t._v("循环非常简单。你只要修改网格的属性即可，Threejs会处理剩下的事情：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  stats"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  trackballControls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDelta")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  cube"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotationSpeed\n  cube"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotationSpeed\n  cube"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("z "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotationSpeed\n\n  step "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bouncingSpeed\n  sphere"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("step"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  sphere"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("step"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  scalingStep "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scalingSpeed\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" scaleX "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scalingStep "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" scaleY "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scalingStep "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" scaleZ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scalingStep "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  cylinder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scale"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaleX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("scaleY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("scaleZ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("renderScene"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  renderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])]),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),n("p",[t._v("本博客的dat.gui.js 和 stats.js都是改造过的"),n("br"),t._v("\nstats.js 加上了domEl参数，让stats可以添加到某个确定的dom中去"),n("br"),t._v("\ndat.gui.js改动稍微多一点，"),n("br"),t._v("\n首先第2338行的 GUI 方法，加上了domEl参数，同上"),n("br"),t._v("\n然后第2611行的appendChild使用了domEl,将gui面板添加到domEl中去"),n("br"),t._v("\n然后在gui被销毁掉之后将 autoPlaceVirgin 这个全局变量置为 true,修复下一次点进页面不能添加gui的问题")])])],2)}),[],!1,null,"75a7cdd0",null);s.default=c.exports}}]);