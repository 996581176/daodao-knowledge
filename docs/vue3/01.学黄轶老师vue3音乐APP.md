---
title: 学黄轶老师vue3音乐APP
date: 2021-07-26 15:33:58
permalink: /pages/f97ef5/
categories:
  - vue3
tags:
    -
---
学习黄老师的音乐app课程有一段时间了，学到了很多之前不知道的花式骚操作，怕自己忘了，记录一下自己学习的收获

## 第二章 项目初始化和推荐页面开发

### 如何使用脚手架创建vue3项目
1. 运行 vue creat vue-music-next,其中vue-music-next是新建的项目的名字，可以随便写
2. 然后选择Manually select features （手动的去选择）
然后最主要的是vue版本选3，其他的随意

### 项目中数据mock方案
黄老师的项目中数据使用的是真实接口的数据，但是真实接口数据会有跨域的问题，服务端是不存在跨域的，所以使用`webpack`的`devServer`来解决一下:  
`devServer.before`提供了一个在 `devServer` 内部的 所有中间件执行之前的自定义执行函数,所以可以利用它来模拟接口：
例： 在vue.config.js中如下定义：
```js 
//vue.config.js
module.exports = {
    css: {
        loaderOptions:{
            sass: {
                //全局引入变量和 mixin
                prependData: `
                    @import "@/assets/scss/variable.scss";
                    @import "@/assets/scss/mixin.scss";
                `
            }
        }
    },
    devServer: {
        before(app) {
            app.get('/some/path', function (req, res) {
                res.json({ custom: 'response' });
            });
        }
    }
}
```
然后就可以在项目中使用接口：
```js
axios.get('/some/path').then((res) => {
    this.data = res.data // {custom:'response'}
})
```

### 这是API模板引用(ref)
在使用组合式 API 时，`响应式引`用和`模板引用`的概念是统一的。为了获得对模板内元素或组件实例的引用，我们可以像往常一样声明 `ref` 并从 `setup()` 返回：
```vue
<template> 
  <div ref="root">This is a root element</div>
</template>

<script>
  import { ref, onMounted } from 'vue'

  export default {
    setup() {
      const root = ref(null)

      onMounted(() => {
        // DOM元素将在初始渲染后分配给ref
        console.log(root.value) // <div>这是根元素</div>
      })

      return {
        root
      }
    }
  }
</script>
```
这里我们在渲染上下文中暴露 `root`，并通过 `ref="root"`，将其绑定到 `div` 作为其 `ref`。在`虚拟 DOM 补丁`算法中，如果 `VNode` 的 `ref` 键对应于渲染上下文中的 `ref`，则 `VNode` 的相应元素或组件实例将被分配给该 `ref` 的值。这是在虚拟 DOM 挂载/打补丁过程中执行的，因此模板引用只会在初始渲染之后获得赋值。

作为模板使用的 `ref` 的行为与任何其他 `ref` 一样：它们是响应式的，可以传递到 (或从中返回) 复合函数中。
### 滚动组件封装
### v-loading自定义指令开发
### composition API
### watch
### computed