---
title: content内容生成技术
date: 2024-03-25 08:42:41
permalink: /pages/cc64c4/
categories:
  - css
  - css世界
  - 盒尺寸四大家族
  - 深入理解content
tags:
    -
---
## content辅助元素生成
此应用的核心点不在于content生成的内容，而是伪元素本身。通常，我们会把content的属性值设置为空字符串，像这样：
```css
.element:before {
    content: ''
}
```
然后利用其他css代码来生成辅助元素，或实现图形效果，或实现特定布局，这样做的好处是HTML代码会显得更干净。

最常见的应用就是清除浮动带来的影响：
```css
.clear:after {
    content: '';
    display: block;
    clear: both;
}
```

另一个很具有代表性的应用就是辅助实现“两端对齐”以及“垂直居中/上边缘/下边缘对齐”效果。

此实例演示是一个自动等宽布局且底部对齐的柱状图，默认展示4项，当我们动态插入更多柱子元素，布局依然只能均分剩余空间。
<div id="box" class="box"><i class="bar">
</i>
    <i class="bar"></i>
    <i class="bar"></i>
    <i class="bar"></i>
</div>
<button id="button">再增加一条数据</button>

核心css代码如下：
```css {5}
.box {
    width: 256px;
    height: 256px;
    border-bottom: 1px dashed #ccc;
    text-align: justify; /* 两端对齐是关键 */
}
.box:before {
    content:"";
    display: inline-block;
    height:100%;
}
.box:after {
    content:"";
    display: inline-block;
    width: 100%;
}
.bar {
    display: inline-block;
    width: 20px;
    height: 0;
}
```
至于实现原理，:before伪元素用于辅助实现底对齐，：after伪元素用于辅助实现两端对齐。

## content字符内容生成
content字符内容生成就是直接写入字符内容，中英文都可以，比较常见的应用就是配合@font-face规则实现图标字体效果。

例如下面的例子，此时页面显示的就不是家字，而是一个图标。
```css
@font-face {
    font-family: "myico";
    src: url("/fonts/4/myico.eto");
    src: url("/fonts/4/myico.eto#iefix") format("embedded-opentype"),
        url("/fonts/4/myico.ttf") format("tryetype"),
        url("/fonts/4/myico.woff") format("woff");
}
.icon-home:before {
    font-size: 64px;
    font-family:  myico;
    content:"家"；
}
```
```html
<span class="icon-home"></span>
```

- 除了常规字符之外，还可以插入Unicode衣服，比较经典的就是插入换行符来实现某些布局效果。
```css
:after {
    content: '\A';
    white-space: pre;
}
```

## content图片生成
content图片生成指的是直接用url功能符显示图片，
```py
div:before {
    content: url(1.jpg);
}
```

<style scoped>
.box {
    width: 256px;
    height: 256px;
    border-bottom: 1px dashed #ccc;
    text-align: justify;
}
.box:before {
    content:"";
    display: inline-block;
    height:100%;
}
.box:after {
    content:"";
    display: inline-block;
    width: 100%;
}
.bar {
    display: inline-block;
    width: 20px;
    height: 0;
}
</style>

<script>
export default {
    mounted() {
        if (document.querySelector) {
            var eleBox = document.getElementById('box');
            // 目前柱子元素和个数
            var eleBars = document.querySelectorAll('#box > i');
            var lenBar = eleBars.length;
            if (eleBox && lenBar) {
                for (var indexBar = 0; indexBar < lenBar; indexBar += 1) {
                    // 柱形图的柱子高度和背景色随机
                    eleBars[indexBar].style.height = Math.ceil(256 * Math.random()) + 'px';
                    eleBars[indexBar].style.backgroundColor = '#' + (Math.random() + '').slice(-6);
                }
            }

            // 增加数据
            var eleBtn = document.getElementById('button');
            if (eleBtn && lenBar) {
                eleBtn.onclick = function() {
                    // 随机高度和背景色
                    var height = Math.ceil(256 * Math.random()) + 'px';
                    var backgroundColor = '#' + (Math.random() + '').slice(-6);

                    // 创建柱子元素
                    var eleClone = eleBars[0].cloneNode();

                    eleClone.style.height = height;
                    eleClone.style.backgroundColor = backgroundColor;
                    
                    // 此处的字符替换为了兼容IE8下的演示效果
                    eleBox.innerHTML = eleBox.innerHTML.replace(/I><I/ig, 'I> <I') + ' ' + eleClone.outerHTML;

                    lenBar+=1;
                    // 最多10条数据
                    if (lenBar == 10) {
                        this.setAttribute('disabled', 'disabled');
                    }
                };
            }
        }
    }
}
</script>