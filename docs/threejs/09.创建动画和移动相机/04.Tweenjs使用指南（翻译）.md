---
title: Tweenjs使用指南（翻译）
date: 2021-04-30 16:57:02
permalink: /pages/5097b7/
categories:
  - threejs
  - 创建动画和移动相机
tags:
    -
---
前面学到了`tween.js`,但是网上的文档有点不全，为了学习英语我把双语版的放上来：  
英文版文档地址：<a href="https://github.com/tweenjs/tween.js/blob/master/docs/user_guide.md" target="_blank">tween.js文档</a>

## What is a tween? How do they work? Why do you want to use them?什么是tween？它是如何工作的？你为什么要使用它们
A tween is a concept that allows you to change the values of the properties of an object in a smooth way. You just tell it which properties you want to change, which final values should they have when the tween finishes running, and how long should this take, and the tweening engine will take care of finding the intermediate values from the starting to the ending point. For example, suppose you have a position object with x and y coordinates:

`tween`是一个允许您以一种平滑的方式更改对象属性值的概念。你只需要告诉它你想改变哪些属性，当`tween`结束运行时，它们应该是哪些最终值，并且可以定义发生这个过程需要多长时间，`tween`引擎会负责寻找从起点到终点的中间值。例如：假设你有一个具有x和y坐标的位置对象：
```js
var position = {x:100,y:0}
```
If you wanted to change the x value from 100 to 200, you'd do this:  
如果你想把x值从100改为200，你可以这样做:

```js
// Create a tween for position first 
//首先传入position创建tween实例
var tween = new TWEEN.Tween(position)

// Then tell the tween we want to animate the x property over 1000 milliseconds
//然后告诉tween我们想在1000毫秒以内变动这个x属性
tween.to({x: 200}, 1000)
```

Actually this won't do anything yet. The tween has been created but it's not active. You need to start it:  
实际上现在还什么都没发生变化。因为`tween`已经创建，但还没有激活。你需要启动它：
```js
// And set it to start
// 启动
tween.start()
```

Finally in order to run as smoothly as possible you should call the TWEEN.update function in the same main loop you're using for animating. This generally looks like this:  
最后，为了能够尽量平滑的实现动画，你应该在动画的主循环中调用`TWEEN.update`函数：
```js
animate()

function animate() {
	requestAnimationFrame(animate)
	// [...]
	TWEEN.update()
	// [...]
}
```

This will take care of updating all active tweens; after 1 second (i.e. 1000 milliseconds) position.x will be 200.  
它将负责更新所有活跃的`tween`实例；经过1秒(即1000毫秒) `position.x`会等于200。

But unless you print the value of x to the console, you can't see its value changing. You might want to use the onUpdate callback:  
但是除非你把x的值打印到控制台, 你都看不到它的值在变化。您可能需要使用`onUpdate`回调:
```js
tween.onUpdate(function (object) {
	console.log(object.x)
})
```

This function will be called each time the tween is updated; how often this happens depends on many factors--how fast (and how busy!) your computer or device is, for example.  
每次`tween`更新时都会调用这个函数,多久触发一次取决于很多因素 -- 例如你的电脑或设备有多快(多繁忙!)  

So far we've only used tweens to print values to the console, but you could use it for things such as animating positions of three.js objects:  
到目前为止，我们只使用`tweens`将值打印到控制台,但是你应该用它来做一些其他的事情，比如使用动画改变`three.js`的对象的位置：
```js
var tween = new TWEEN.Tween(cube.position).to({x: 100, y: 100, z: 100}, 10000).start()

animate()

function animate() {
	requestAnimationFrame(animate)
	TWEEN.update()

	threeRenderer.render(scene, camera)
}
```
In this case, because the three.js renderer will look at the object's position before rendering, you don't need to use an explicit onUpdate callback. 
在这个案例中， 因为`three.js`的渲染器会在渲染前查看对象的位置，你不需要使用显式的使用`onUpdate`回调。

You might have noticed something different here too: we're chaining the tween function calls! Each tween function returns the tween instance, so you can rewrite the following code:  
你可能也注意到了这里的不同：`tween`函数我们是链式调用的！每个`tween`的函数返回该`tween`的实例，因此您可以重写以下代码：
```js
var tween = new TWEEN.Tween(position)
tween.to({x: 200}, 1000)
tween.start()
```
into this  
重写为以下代码
```js
var tween = new TWEEN.Tween(position).to({x: 200}, 1000).start()
```

You'll see this a lot in the examples, so it's good to be familiar with it! Check 04-simplest for a working example.  
在很多例子中你会看到这种调用方式，所以你最好熟悉它！最简单的示例 <a href="https://github.com/tweenjs/tween.js/blob/master/examples/04_simplest.html" target="_blank">04-simplest</a>。