(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{397:function(e,n,t){},455:function(e,n,t){"use strict";t(397)},483:function(e,n,t){"use strict";t.r(n);var o,i,a,r,l,u,s=t(325),c=t(395),d=t(338),v=t(352);console.log("init");var p=[{value:100,point:new s.Sb(.9228061177986433,6.098983904751975,-43.16601655041643)},{value:50,point:new s.Sb(71.71140339258446,20.084578276989106,-38.84333245791214)}],f={data:function(){return{gui:null}},beforeDestroy:function(){this.gui&&this.gui.destroy()},mounted:function(){console.log("start");function e(e){e.traverse((function(e){if("Mesh"==e.type){var n=e.geometry;n.morphAttributes.position=[];for(var t=n.attributes.position,o=[],i=0;i<t.count;i++){for(var a=new s.Sb(t.getX(i),t.getY(i),t.getZ(i)),r=void 0,l=void 0,c=0;c<p.length;c++){var d=p[c].point.distanceTo(a);(0==c||d<r)&&(r=d,l=p[c])}var v=0;r<u.infulence&&(v=l.value*((u.infulence-r)/u.infulence));var f=a.y+v;o.push(a.x,f,a.z)}n.morphAttributes.position[0]=new s.w(o,3),e.updateMorphTargets(),e.morphTargetInfluences[0]=u.weight}}))}function n(){a.clear(),a.render(l,i)}!function(){o=document.getElementById("container"),(l=new s.xb).background=new s.p(16777215);var t=o.clientWidth,p=o.clientHeight;(i=new s.jb(60,t/p,.1,3e3)).position.set(0,0,100),l.add(i),r=new s.z,l.add(r),u={infulence:100,weight:1},console.log("初始化"),(new v.a).load("/daodao-knowledge/models/obj/滑坡.obj",(function(t){console.log(t),e(t),r.add(t),n()}));var f=new s.nb(268435455,1);i.add(f),(a=new s.Vb({antialias:!0})).autoClear=!1,a.setPixelRatio(window.devicePixelRatio),a.setSize(t,p),o.appendChild(a.domElement),new d.a(i,a.domElement).addEventListener("change",n);var g=new c.a({},o);g.add(u,"infulence",0,100).onChange((function(){e(r),n()})),g.add(u,"weight",0,1).step(.01).onChange((function(e){r.traverse((function(n){"Mesh"==n.type&&(n.morphTargetInfluences[0]=e)})),n()}))}()}},g=(t(455),t(47)),w=Object(g.a)(f,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("写这篇的原因是公司想做三维仿真，就是让模型根据测点数据发生形变，想了很久决定还是验证一下我心中的想法能不能够实现，我的思路如下：")]),e._v(" "),t("ol",[t("li",[e._v("首先拿到模型的顶点位置")]),e._v(" "),t("li",[e._v("根据数据计算出新的顶点位置，就是插值之类的啦")]),e._v(" "),t("li",[e._v("将新的顶点位置存入morphTargetInfluences中，并设置权重为1改变模型形状")]),e._v(" "),t("li",[e._v("周期设置0-1的权重可以实现振动动画")])]),e._v(" "),t("p",[e._v("好了开始试试吧：")]),e._v(" "),t("div",{attrs:{id:"container"}})])}),[],!1,null,null,null);n.default=w.exports}}]);